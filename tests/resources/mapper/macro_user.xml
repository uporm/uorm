<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//uporm.github.io//DTD Mapper 1//EN" "https://uporm.github.io/dtd/uorm-1-mapper.dtd">
<mapper namespace="macro_user">
  <insert id="insert_user">
    INSERT INTO users(id, name, age) VALUES (#{user.id}, #{user.name}, #{user.age})
  </insert>

  <select id="get_by_id">
    SELECT id, name, age FROM users WHERE id = #{id}
  </select>

  <select id="list_all">
    SELECT id, name, age FROM users ORDER BY id
  </select>

  <select id="list_by_min_age">
    SELECT id, name, age FROM users WHERE age >= #{min_age} ORDER BY age, id
  </select>

  <update id="update_age">
    UPDATE users SET age = #{age} WHERE id = #{id}
  </update>

  <delete id="delete_by_id">
    DELETE FROM users WHERE id = #{id}
  </delete>

  <select id="list_by_ids">
    SELECT id, name, age FROM users WHERE id IN
    <foreach item="id" collection="ids" open="(" separator="," close=")">
      #{id}
    </foreach>
    ORDER BY id
  </select>

  <insert id="insert">
    INSERT INTO users(name, age) VALUES (#{name}, #{age})
  </insert>
</mapper>
